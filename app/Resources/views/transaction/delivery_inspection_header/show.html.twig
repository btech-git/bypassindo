{% extends 'transaction/layout.html.twig' %}

{% block title 'Show Delivery Inspection Header' %}

{% block actions %}
    {{ include('transaction/actions.html.twig') }}
{% endblock %}

{% block content %}
    <table class="table table-bordered table-striped">
        <tbody>
            <tr>
                <th>PDI #</th>
                <td>{{ deliveryInspectionHeader.codeNumber|default }}</td>
            </tr>
            <tr>
                <th>Tanggal</th>
                <td>{{ deliveryInspectionHeader.transactionDate|default ? deliveryInspectionHeader.transactionDate|date('Y-m-d') }}</td>
            </tr>
            <tr>
                <th>Vehicle Complete</th>
                <td>{{ deliveryInspectionHeader.isVehicleComplete|default ? 'Yes' : 'No' }}</td>
            </tr>
            <tr>
                <th>Body Builder Executed</th>
                <td>{{ deliveryInspectionHeader.isBodyBuilderExecuted|default ? 'Yes' : 'No' }}</td>
            </tr>
            <tr>
                <th>SPK #</th>
                <td>{{ deliveryInspectionHeader.receiveOrder.purchaseDeliveryOrder.saleOrder.codeNumber|default }}</td>
            </tr>
            <tr>
                <th>Customer</th>
                <td>{{ deliveryInspectionHeader.receiveOrder.purchaseDeliveryOrder.saleOrder.customer.name|default }}</td>
            </tr>
            <tr>
                <th>Merk</th>
                <td>{{ deliveryInspectionHeader.receiveOrder.purchaseDeliveryOrder.saleOrder.vehicleBrand|default }}</td>
            </tr>
            <tr>
                <th>Warna</th>
                <td>{{ deliveryInspectionHeader.receiveOrder.purchaseDeliveryOrder.saleOrder.vehicleColor|default }}</td>
            </tr>
            <tr>
                <th>Tahun Pembuatan</th>
                <td>{{ deliveryInspectionHeader.receiveOrder.purchaseDeliveryOrder.vehicleProductionYear|default }}</td>
            </tr>
            <tr>
                <th>Rangka #</th>
                <td>{{ deliveryInspectionHeader.receiveOrder.purchaseDeliveryOrder.vehicleChassisNumber|default }}</td>
            </tr>
            <tr>
                <th>Mesin #</th>
                <td>{{ deliveryInspectionHeader.receiveOrder.purchaseDeliveryOrder.vehicleMachineNumber|default }}</td>
            </tr>
            <tr>
                <th>Deskripsi</th>
                <td>{{ deliveryInspectionHeader.receiveOrder.purchaseDeliveryOrder.vehicleDescription|default }}</td>
            </tr>
            <tr>
                <th>Note</th>
                <td>{{ deliveryInspectionHeader.note|default }}</td>
            </tr>
        </tbody>
    </table>
    
    <div class="panel panel-info">
        <div class="panel-heading">
            <h1 class="panel-title">Inspection Items</h1>
        </div>
        <div class="panel-body">
            {% set currentIndex = 0 %}
            {% set lastId = '' %}
            {% for deliveryInspectionDetail in deliveryInspectionHeader.deliveryInspectionDetails %}
                {% set inspectionItem = deliveryInspectionDetail.inspectionItem %}
                {% set inspectionItemCategory = inspectionItem.inspectionItemCategory %}
                {% if lastId != inspectionItemCategory.id %}
                    {% if currentIndex % 3 > 0 and currentIndex % 3 < 3 %}
                        {{ '</div>' }}
                    {% endif %}
                    <div>&nbsp;</div>
                    <div class="row">
                        <div class="col-sm-12">
                            <span class="lead">
                                <strong>{{ inspectionItemCategory.name }}</strong>
                            </span>
                        </div>
                    </div>
                    {% set currentIndex = 0 %}
                {% endif %}
                {% if currentIndex % 3 == 0 %}
                    <div class="row">
                {% endif %}
                <div class="col-sm-4" style="padding-top: 5px; padding-bottom: 5px">
                    {{ inspectionItem.name }}
                </div>
                {% if currentIndex % 3 == 2 %}
                    </div>
                {% endif %}
                {% if lastId != inspectionItemCategory.id %}
                    {% set lastId = inspectionItemCategory.id %}
                {% endif %}
                {% set currentIndex = currentIndex + 1 %}
            {% endfor %}
        </div>
    </div>
{% endblock %}
